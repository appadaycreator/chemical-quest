<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà - ÂåñÂ≠¶Âºè„Éë„Ç∫„É´„Ç≤„Éº„É† | ÂÖÉÁ¥†Ë®òÂè∑„ÅßÂ≠¶„Å∂ÂåñÂ≠¶</title>
    <meta name="description" content="ÂÖÉÁ¥†Ë®òÂè∑„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Å¶ÂåñÂ≠¶Âºè„Çí‰Ωú„ÇãÊïôËÇ≤ÁöÑ„Éë„Ç∫„É´„Ç≤„Éº„É†„ÄÇH‚ÇÇO„Åã„ÇâË§áÈõë„Å™ÂåñÂêàÁâ©„Åæ„Åß„ÄÅÊ•Ω„Åó„ÅèÂåñÂ≠¶„ÅÆÂü∫Á§é„ÇíÂ≠¶„Åπ„Åæ„Åô„ÄÇÁÑ°Êñô„Åß„Éó„É¨„Ç§ÂèØËÉΩÔºÅ">
    <meta name="keywords" content="ÂåñÂ≠¶Âºè,„Éë„Ç∫„É´,„Ç≤„Éº„É†,ÂÖÉÁ¥†,ÊïôËÇ≤,Â≠¶Áøí,ÂåñÂ≠¶,ÂàÜÂ≠ê,ÂåñÂêàÁâ©,ÁêÜÁßë">
    
    <!-- OGPË®≠ÂÆö -->
    <meta property="og:title" content="„Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà - ÂåñÂ≠¶Âºè„Éë„Ç∫„É´„Ç≤„Éº„É†">
    <meta property="og:description" content="ÂÖÉÁ¥†Ë®òÂè∑„ÅßÂåñÂ≠¶Âºè„Çí‰Ωú„ÇãÔºÅÊ•Ω„Åó„ÅèÂ≠¶„Åπ„ÇãÂåñÂ≠¶„Éë„Ç∫„É´„Ç≤„Éº„É†">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://appadaycreator.github.io/chemical-quest/">
    <meta property="og:image" content="https://appadaycreator.github.io/chemical-quest/ogp.png">
    <meta property="og:site_name" content="„Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="„Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà - ÂåñÂ≠¶Âºè„Éë„Ç∫„É´„Ç≤„Éº„É†">
    <meta name="twitter:description" content="ÂÖÉÁ¥†Ë®òÂè∑„ÅßÂåñÂ≠¶Âºè„Çí‰Ωú„ÇãÔºÅÊ•Ω„Åó„ÅèÂ≠¶„Åπ„ÇãÂåñÂ≠¶„Éë„Ç∫„É´„Ç≤„Éº„É†">
    <meta name="twitter:image" content="https://appadaycreator.github.io/chemical-quest/ogp.png">
    
    <!-- PWAË®≠ÂÆö -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1e40af">
    <link rel="icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- CDN„É©„Ç§„Éñ„É©„É™ -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TXQGZRF9');</script>
    <!-- End Google Tag Manager -->

    <style>
        :root {
            --primary-color: #1e40af;
            --secondary-color: #3b82f6;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --border-color: #e5e7eb;
        }

        [data-theme="dark"] {
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --border-color: #374151;
        }

        body {
            font-family: 'Noto Sans JP', 'Roboto', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .font-size-xs { font-size: 0.75rem; }
        .font-size-sm { font-size: 0.875rem; }
        .font-size-base { font-size: 1rem; }
        .font-size-lg { font-size: 1.125rem; }
        .font-size-xl { font-size: 1.5rem; }

        .element-card {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            border-radius: 12px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .element-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }

        .element-card.selected {
            background: linear-gradient(135deg, var(--accent-color), #f97316);
            transform: scale(1.05);
        }

        .molecule-display {
            background: var(--bg-secondary);
            border: 2px dashed var(--border-color);
            border-radius: 16px;
            min-height: 120px;
            transition: all 0.3s ease;
        }

        .molecule-display.valid {
            border-color: var(--success-color);
            background: rgba(16, 185, 129, 0.1);
        }

        .molecule-display.invalid {
            border-color: var(--danger-color);
            background: rgba(239, 68, 68, 0.1);
        }

        .sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .sidebar.open {
            transform: translateX(0);
        }

        .game-board {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 24px;
            padding: 2rem;
            color: white;
        }

        .periodic-table-mini {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 4px;
            max-width: 400px;
        }

        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="font-size-base">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TXQGZRF9"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Header -->
    <header class="bg-white shadow-lg fixed w-full top-0 z-50" style="background: var(--bg-primary);">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <button id="menuToggle" class="lg:hidden text-2xl">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="text-2xl font-bold text-blue-600 flex items-center">
                        <svg class="w-8 h-8 mr-2" viewBox="0 0 100 100" fill="currentColor">
                            <circle cx="25" cy="25" r="8" fill="#3b82f6"/>
                            <circle cx="75" cy="25" r="8" fill="#ef4444"/>
                            <circle cx="50" cy="75" r="8" fill="#10b981"/>
                            <line x1="25" y1="25" x2="75" y2="25" stroke="currentColor" stroke-width="2"/>
                            <line x1="33" y1="33" x2="42" y2="67" stroke="currentColor" stroke-width="2"/>
                            <line x1="67" y1="33" x2="58" y2="67" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span data-i18n="app.title">„Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà</span>
                    </h1>
                </div>
                
                <nav class="hidden lg:flex space-x-6">
                    <a href="#game" class="hover:text-blue-600 transition" data-i18n="nav.game">„Ç≤„Éº„É†</a>
                    <a href="#learn" class="hover:text-blue-600 transition" data-i18n="nav.learn">Â≠¶Áøí</a>
                    <a href="#about" class="hover:text-blue-600 transition" data-i18n="nav.about">‰Ωø„ÅÑÊñπ</a>
                    <a href="#privacy" class="hover:text-blue-600 transition" data-i18n="nav.privacy">„Éó„É©„Ç§„Éê„Ç∑„Éº</a>
                    <a href="#contact" class="hover:text-blue-600 transition" data-i18n="nav.contact">„ÅäÂïè„ÅÑÂêà„Çè„Åõ</a>
                </nav>

                <div class="flex items-center space-x-4">
                    <select id="languageSelect" class="border rounded px-2 py-1">
                        <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
                        <option value="en">üá∫üá∏ English</option>
                    </select>
                    
                    <select id="fontSizeSelect" class="border rounded px-2 py-1">
                        <option value="xs">Ê•µÂ∞è</option>
                        <option value="sm">Â∞è</option>
                        <option value="base" selected>Ê®ôÊ∫ñ</option>
                        <option value="lg">Â§ß</option>
                        <option value="xl">ÁâπÂ§ß</option>
                    </select>
                    
                    <button id="themeToggle" class="text-xl">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Sidebar -->
    <div id="mobileSidebar" class="fixed inset-y-0 left-0 z-40 w-64 bg-white shadow-lg sidebar lg:hidden" style="background: var(--bg-primary);">
        <div class="p-4 border-b">
            <h2 class="font-bold text-lg" data-i18n="menu.title">„É°„Éã„É•„Éº</h2>
        </div>
        <nav class="p-4 space-y-4">
            <a href="#game" class="block hover:text-blue-600 transition" data-i18n="nav.game">„Ç≤„Éº„É†</a>
            <a href="#learn" class="block hover:text-blue-600 transition" data-i18n="nav.learn">Â≠¶Áøí</a>
            <a href="#about" class="block hover:text-blue-600 transition" data-i18n="nav.about">‰Ωø„ÅÑÊñπ</a>
            <a href="#privacy" class="block hover:text-blue-600 transition" data-i18n="nav.privacy">„Éó„É©„Ç§„Éê„Ç∑„Éº</a>
            <a href="#contact" class="block hover:text-blue-600 transition" data-i18n="nav.contact">„ÅäÂïè„ÅÑÂêà„Çè„Åõ</a>
        </nav>
    </div>

    <!-- Main Content -->
    <main class="pt-16">
        <!-- Hero Section -->
        <section class="bg-gradient-to-br from-blue-600 to-purple-700 text-white py-20">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-5xl font-bold mb-6 fade-in" data-i18n="hero.title">ÂÖÉÁ¥†Ë®òÂè∑„ÅßÂåñÂ≠¶Âºè„Çí‰Ωú„Çç„ÅÜÔºÅ</h2>
                <p class="text-xl mb-8 opacity-90 fade-in" data-i18n="hero.subtitle">H‚ÇÇO„Åã„ÇâË§áÈõë„Å™ÂåñÂêàÁâ©„Åæ„Åß„ÄÅ„Éë„Ç∫„É´„ÅßÂåñÂ≠¶„Éû„Çπ„Çø„Éº</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center fade-in">
                    <button id="startGameBtn" class="bg-yellow-500 hover:bg-yellow-600 text-black font-bold py-4 px-8 rounded-full text-lg transition transform hover:scale-105" data-i18n="hero.start">
                        „Ç≤„Éº„É†„Çπ„Çø„Éº„Éà
                    </button>
                    <button id="learnModeBtn" class="bg-transparent border-2 border-white hover:bg-white hover:text-blue-600 font-bold py-4 px-8 rounded-full text-lg transition" data-i18n="hero.learn">
                        Â≠¶Áøí„É¢„Éº„Éâ
                    </button>
                </div>
            </div>
        </section>

        <!-- Game Section -->
        <section id="game" class="py-16 bg-gray-50" style="background: var(--bg-secondary);">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h3 class="text-3xl font-bold mb-4" data-i18n="game.title">ÂåñÂ≠¶Âºè„Éë„Ç∫„É´</h3>
                    <p class="text-gray-600 text-lg" data-i18n="game.description">ÂÖÉÁ¥†„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Å¶Ê≠£„Åó„ÅÑÂåñÂ≠¶Âºè„Çí‰Ωú„Çä„Åæ„Åó„Çá„ÅÜ</p>
                </div>

                <div class="max-w-6xl mx-auto">
                    <div class="grid lg:grid-cols-4 gap-8">
                        <!-- Game Board -->
                        <div class="lg:col-span-3">
                            <div class="game-board">
                                <div class="flex justify-between items-center mb-6">
                                    <div class="flex items-center space-x-4">
                                        <span class="text-lg font-semibold">„É¨„Éô„É´: <span id="currentLevel">1</span></span>
                                        <span class="text-lg font-semibold">„Çπ„Ç≥„Ç¢: <span id="currentScore">0</span></span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-clock"></i>
                                        <span id="timer" class="text-lg font-mono">05:00</span>
                                    </div>
                                </div>

                                <!-- Target Molecule -->
                                <div class="mb-6">
                                    <h4 class="text-xl font-semibold mb-3" data-i18n="game.target">ÁõÆÊ®ôÂåñÂêàÁâ©:</h4>
                                    <div id="targetMolecule" class="bg-white bg-opacity-20 rounded-lg p-4 text-center">
                                        <span class="text-2xl font-mono">H‚ÇÇO</span>
                                        <p class="text-sm mt-2 opacity-80">Ê∞¥</p>
                                    </div>
                                </div>

                                <!-- Formula Builder -->
                                <div class="mb-6">
                                    <h4 class="text-xl font-semibold mb-3" data-i18n="game.formula">‰ΩúÊàê‰∏≠„ÅÆÂåñÂ≠¶Âºè:</h4>
                                    <div id="formulaBuilder" class="molecule-display flex items-center justify-center min-h-24 bg-white bg-opacity-20 rounded-lg">
                                        <span class="text-gray-400" data-i18n="game.drop_elements">ÂÖÉÁ¥†„Çí„Åì„Åì„Å´„Éâ„É©„ÉÉ„Ç∞</span>
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="flex flex-wrap gap-3 justify-center">
                                    <button id="checkFormulaBtn" class="bg-green-500 hover:bg-green-600 px-6 py-3 rounded-lg font-semibold transition" data-i18n="game.check">
                                        ÂåñÂ≠¶Âºè„Çí„ÉÅ„Çß„ÉÉ„ÇØ
                                    </button>
                                    <button id="clearFormulaBtn" class="bg-red-500 hover:bg-red-600 px-6 py-3 rounded-lg font-semibold transition" data-i18n="game.clear">
                                        „ÇØ„É™„Ç¢
                                    </button>
                                    <button id="hintBtn" class="bg-blue-500 hover:bg-blue-600 px-6 py-3 rounded-lg font-semibold transition" data-i18n="game.hint">
                                        „Éí„É≥„Éà
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Element Palette -->
                        <div class="lg:col-span-1">
                            <h4 class="text-xl font-semibold mb-4" data-i18n="game.elements">Âà©Áî®ÂèØËÉΩ„Å™ÂÖÉÁ¥†</h4>
                            <div id="elementPalette" class="grid grid-cols-3 gap-2">
                                <!-- ÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„ÇãÂÖÉÁ¥†„Ç´„Éº„Éâ -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Game Stats -->
                <div class="mt-12 max-w-4xl mx-auto">
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="bg-white rounded-lg p-6 text-center shadow-md" style="background: var(--bg-primary);">
                            <i class="fas fa-trophy text-3xl text-yellow-500 mb-3"></i>
                            <h5 class="font-semibold text-lg mb-2" data-i18n="stats.correct">Ê≠£Ëß£Êï∞</h5>
                            <span id="correctCount" class="text-2xl font-bold text-green-600">0</span>
                        </div>
                        <div class="bg-white rounded-lg p-6 text-center shadow-md" style="background: var(--bg-primary);">
                            <i class="fas fa-chart-line text-3xl text-blue-500 mb-3"></i>
                            <h5 class="font-semibold text-lg mb-2" data-i18n="stats.accuracy">Ê≠£Ëß£Áéá</h5>
                            <span id="accuracyRate" class="text-2xl font-bold text-blue-600">0%</span>
                        </div>
                        <div class="bg-white rounded-lg p-6 text-center shadow-md" style="background: var(--bg-primary);">
                            <i class="fas fa-clock text-3xl text-purple-500 mb-3"></i>
                            <h5 class="font-semibold text-lg mb-2" data-i18n="stats.best_time">ÊúÄÁü≠ÊôÇÈñì</h5>
                            <span id="bestTime" class="text-2xl font-bold text-purple-600">--:--</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Learning Section -->
        <section id="learn" class="py-16" style="background: var(--bg-primary);">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h3 class="text-3xl font-bold mb-4" data-i18n="learn.title">ÂåñÂ≠¶„ÇíÂ≠¶„Åº„ÅÜ</h3>
                    <p class="text-gray-600 text-lg" data-i18n="learn.description">Âü∫Á§é„Åã„ÇâÂøúÁî®„Åæ„Åß„ÄÅÊ•Ω„Åó„ÅèÂåñÂ≠¶„ÇíÂ≠¶Áøí</p>
                </div>

                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                    <div class="bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-6 transform hover:scale-105 transition">
                        <i class="fas fa-atom text-3xl mb-4"></i>
                        <h4 class="text-xl font-semibold mb-3" data-i18n="learn.basics">Âü∫Á§éÂåñÂ≠¶</h4>
                        <p class="mb-4" data-i18n="learn.basics_desc">ÂéüÂ≠ê„ÄÅÂàÜÂ≠ê„ÄÅÂÖÉÁ¥†„ÅÆÂü∫Êú¨Ê¶ÇÂøµ</p>
                        <button class="bg-white text-blue-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>

                    <div class="bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-6 transform hover:scale-105 transition">
                        <i class="fas fa-link text-3xl mb-4"></i>
                        <h4 class="text-xl font-semibold mb-3" data-i18n="learn.bonds">ÂåñÂ≠¶ÁµêÂêà</h4>
                        <p class="mb-4" data-i18n="learn.bonds_desc">„Ç§„Ç™„É≥ÁµêÂêà„ÄÅÂÖ±ÊúâÁµêÂêà„ÄÅÈáëÂ±ûÁµêÂêà</p>
                        <button class="bg-white text-green-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>

                    <div class="bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-6 transform hover:scale-105 transition">
                        <i class="fas fa-flask text-3xl mb-4"></i>
                        <h4 class="text-xl font-semibold mb-3" data-i18n="learn.reactions">ÂåñÂ≠¶ÂèçÂøú</h4>
                        <p class="mb-4" data-i18n="learn.reactions_desc">ÂèçÂøúÂºè„ÅÆÊõ∏„ÅçÊñπ„Å®„Éê„É©„É≥„Çπ</p>
                        <button class="bg-white text-purple-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>
                </div>

                <!-- Periodic Table Preview -->
                <div class="mt-16 text-center">
                    <h4 class="text-2xl font-bold mb-8" data-i18n="learn.periodic_table">Âë®ÊúüË°®</h4>
                    <div class="bg-gray-100 rounded-xl p-8 max-w-4xl mx-auto" style="background: var(--bg-secondary);">
                        <div class="periodic-table-mini mx-auto">
                            <!-- ÊúÄÂàù„ÅÆÊï∞ÂÄã„ÅÆÂÖÉÁ¥†„ÅÆ„ÅøË°®Á§∫ -->
                        </div>
                        <p class="mt-4 text-gray-600" data-i18n="learn.periodic_note">„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÂÖÉÁ¥†„ÅÆË©≥Á¥∞„ÇíË¶ã„ÇãÔºàÂÆüË£Ö‰∫àÂÆöÔºâ</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SNS Share Section -->
        <section class="py-16 bg-gradient-to-r from-pink-500 to-orange-500 text-white">
            <div class="container mx-auto px-4 text-center">
                <h3 class="text-3xl font-bold mb-6" data-i18n="share.title">ÁµêÊûú„Çí„Ç∑„Çß„Ç¢„Åó„Çà„ÅÜÔºÅ</h3>
                <div class="flex flex-wrap justify-center gap-4 mb-8">
                    <button id="shareTwitter" class="bg-blue-400 hover:bg-blue-500 px-6 py-3 rounded-lg font-semibold transition flex items-center">
                        <i class="fab fa-twitter mr-2"></i>
                        Twitter
                    </button>
                    <button id="shareFacebook" class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-semibold transition flex items-center">
                        <i class="fab fa-facebook-f mr-2"></i>
                        Facebook
                    </button>
                    <button id="shareLine" class="bg-green-500 hover:bg-green-600 px-6 py-3 rounded-lg font-semibold transition flex items-center">
                        <i class="fab fa-line mr-2"></i>
                        LINE
                    </button>
                    <button id="copyLink" class="bg-gray-700 hover:bg-gray-800 px-6 py-3 rounded-lg font-semibold transition flex items-center">
                        <i class="fas fa-link mr-2"></i>
                        <span data-i18n="share.copy">„É™„É≥„ÇØ„Çí„Ç≥„Éî„Éº</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Affiliate Section -->
        <section class="py-16 bg-gray-100" style="background: var(--bg-secondary);">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h3 class="text-3xl font-bold mb-4" data-i18n="affiliate.title">„Åä„Åô„Åô„ÇÅÂåñÂ≠¶„Ç∞„ÉÉ„Ç∫</h3>
                    <p class="text-gray-600" data-i18n="affiliate.description">Â≠¶Áøí„Çí„Åï„Çâ„Å´Ê∑±„ÇÅ„ÇãÂèÇËÄÉÊõ∏„ÇÑÂÆüÈ®ì„Ç≠„ÉÉ„Éà</p>
                </div>

                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
                    <!-- „Ç¢„Éï„Ç£„É™„Ç®„Ç§„ÉàÂïÜÂìÅ„ÅØÂæå„ÅßË®≠ÂÆö -->
                    <div class="bg-white rounded-lg p-6 shadow-md text-center" style="background: var(--bg-primary);">
                        <i class="fas fa-book text-4xl text-blue-500 mb-4"></i>
                        <h4 class="font-semibold mb-2" data-i18n="affiliate.chemistry_book">ÂåñÂ≠¶ÂèÇËÄÉÊõ∏</h4>
                        <p class="text-gray-600 text-sm mb-4" data-i18n="affiliate.book_desc">Âü∫Á§é„Åã„ÇâÂøúÁî®„Åæ„ÅßÂ≠¶„Åπ„Çã</p>
                        <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>

                    <div class="bg-white rounded-lg p-6 shadow-md text-center" style="background: var(--bg-primary);">
                        <i class="fas fa-table text-4xl text-green-500 mb-4"></i>
                        <h4 class="font-semibold mb-2" data-i18n="affiliate.periodic_poster">Âë®ÊúüË°®„Éù„Çπ„Çø„Éº</h4>
                        <p class="text-gray-600 text-sm mb-4" data-i18n="affiliate.poster_desc">ÈÉ®Â±ã„Å´Ë≤º„Å£„Å¶Ë¶ö„Åà„Çà„ÅÜ</p>
                        <button class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>

                    <div class="bg-white rounded-lg p-6 shadow-md text-center" style="background: var(--bg-primary);">
                        <i class="fas fa-flask text-4xl text-purple-500 mb-4"></i>
                        <h4 class="font-semibold mb-2" data-i18n="affiliate.experiment_kit">ÂÆüÈ®ì„Ç≠„ÉÉ„Éà</h4>
                        <p class="text-gray-600 text-sm mb-4" data-i18n="affiliate.kit_desc">ÂÆâÂÖ®„Å´ÂÆüÈ®ì‰ΩìÈ®ì</p>
                        <button class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>

                    <div class="bg-white rounded-lg p-6 shadow-md text-center" style="background: var(--bg-primary);">
                        <i class="fas fa-atom text-4xl text-red-500 mb-4"></i>
                        <h4 class="font-semibold mb-2" data-i18n="affiliate.molecular_model">ÂàÜÂ≠êÊ®°Âûã</h4>
                        <p class="text-gray-600 text-sm mb-4" data-i18n="affiliate.model_desc">Á´ã‰ΩìÁöÑ„Å´ÁêÜËß£„Åó„Çà„ÅÜ</p>
                        <button class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h4 class="text-xl font-bold mb-4" data-i18n="footer.about">„Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà„Å´„Å§„ÅÑ„Å¶</h4>
                    <p class="text-gray-400 mb-4" data-i18n="footer.about_text">
                        ÂÖÉÁ¥†Ë®òÂè∑„ÅßÂåñÂ≠¶Âºè„Çí‰Ωú„ÇãÊïôËÇ≤ÁöÑ„Éë„Ç∫„É´„Ç≤„Éº„É†„ÄÇÊ•Ω„Åó„ÅèÂåñÂ≠¶„ÇíÂ≠¶„Å≥„Åæ„Åó„Çá„ÅÜ„ÄÇ
                    </p>
                </div>
                <div>
                    <h4 class="text-xl font-bold mb-4" data-i18n="footer.links">„É™„É≥„ÇØ</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#about" class="hover:text-white transition" data-i18n="nav.about">‰Ωø„ÅÑÊñπ</a></li>
                        <li><a href="#privacy" class="hover:text-white transition" data-i18n="nav.privacy">„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº</a></li>
                        <li><a href="#terms" class="hover:text-white transition" data-i18n="nav.terms">Âà©Áî®Ë¶èÁ¥Ñ</a></li>
                        <li><a href="#contact" class="hover:text-white transition" data-i18n="nav.contact">„ÅäÂïè„ÅÑÂêà„Çè„Åõ</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-xl font-bold mb-4" data-i18n="footer.social">SNS</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white text-2xl transition">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white text-2xl transition">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white text-2xl transition">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h4 class="text-xl font-bold mb-4" data-i18n="footer.support">„Çµ„Éù„Éº„Éà</h4>
                    <p class="text-gray-400 mb-2" data-i18n="footer.support_text">„ÅîË≥™Âïè„Éª„ÅîË¶ÅÊúõ„ÅØ„ÅäÊ∞óËªΩ„Å´</p>
                    <a href="mailto:support@chemical-quest.com" class="text-blue-400 hover:text-blue-300 transition">
                        support@chemical-quest.com
                    </a>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2024 „Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        console.log('üß™ „Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà - ÂàùÊúüÂåñÈñãÂßã');

        // „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥Áä∂ÊÖã
        const gameState = {
            currentLevel: 1,
            score: 0,
            correctAnswers: 0,
            totalAttempts: 0,
            timeRemaining: 300,
            isGameActive: false,
            selectedElements: [],
            currentFormula: '',
            targetMolecule: { formula: 'H‚ÇÇO', name: 'Ê∞¥' },
            elements: [
                { symbol: 'H', name: 'Hydrogen', nameJa: 'Ê∞¥Á¥†', mass: 1, available: 10 },
                { symbol: 'O', name: 'Oxygen', nameJa: 'ÈÖ∏Á¥†', mass: 16, available: 5 },
                { symbol: 'C', name: 'Carbon', nameJa: 'ÁÇ≠Á¥†', mass: 12, available: 6 },
                { symbol: 'N', name: 'Nitrogen', nameJa: 'Á™íÁ¥†', mass: 14, available: 4 },
                { symbol: 'Na', name: 'Sodium', nameJa: '„Éä„Éà„É™„Ç¶„É†', mass: 23, available: 3 },
                { symbol: 'Cl', name: 'Chlorine', nameJa: 'Â°©Á¥†', mass: 35, available: 3 },
                { symbol: 'Ca', name: 'Calcium', nameJa: '„Ç´„É´„Ç∑„Ç¶„É†', mass: 40, available: 2 },
                { symbol: 'Fe', name: 'Iron', nameJa: 'ÈâÑ', mass: 56, available: 2 }
            ],
            gameHistory: [],
            settings: {
                language: 'ja',
                fontSize: 'base',
                theme: 'light'
            }
        };

        // Â§öË®ÄË™ûÂØæÂøú
        const translations = {
            ja: {
                'app.title': '„Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà',
                'nav.game': '„Ç≤„Éº„É†',
                'nav.learn': 'Â≠¶Áøí',
                'nav.about': '‰Ωø„ÅÑÊñπ',
                'nav.privacy': '„Éó„É©„Ç§„Éê„Ç∑„Éº',
                'nav.contact': '„ÅäÂïè„ÅÑÂêà„Çè„Åõ',
                'hero.title': 'ÂÖÉÁ¥†Ë®òÂè∑„ÅßÂåñÂ≠¶Âºè„Çí‰Ωú„Çç„ÅÜÔºÅ',
                'hero.subtitle': 'H‚ÇÇO„Åã„ÇâË§áÈõë„Å™ÂåñÂêàÁâ©„Åæ„Åß„ÄÅ„Éë„Ç∫„É´„ÅßÂåñÂ≠¶„Éû„Çπ„Çø„Éº',
                'hero.start': '„Ç≤„Éº„É†„Çπ„Çø„Éº„Éà',
                'hero.learn': 'Â≠¶Áøí„É¢„Éº„Éâ',
                'game.title': 'ÂåñÂ≠¶Âºè„Éë„Ç∫„É´',
                'game.description': 'ÂÖÉÁ¥†„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Å¶Ê≠£„Åó„ÅÑÂåñÂ≠¶Âºè„Çí‰Ωú„Çä„Åæ„Åó„Çá„ÅÜ',
                'game.target': 'ÁõÆÊ®ôÂåñÂêàÁâ©:',
                'game.formula': '‰ΩúÊàê‰∏≠„ÅÆÂåñÂ≠¶Âºè:',
                'game.drop_elements': 'ÂÖÉÁ¥†„Çí„Åì„Åì„Å´„Éâ„É©„ÉÉ„Ç∞',
                'game.check': 'ÂåñÂ≠¶Âºè„Çí„ÉÅ„Çß„ÉÉ„ÇØ',
                'game.clear': '„ÇØ„É™„Ç¢',
                'game.hint': '„Éí„É≥„Éà',
                'game.elements': 'Âà©Áî®ÂèØËÉΩ„Å™ÂÖÉÁ¥†',
                'common.coming_soon': 'Coming Soon'
            },
            en: {
                'app.title': 'Chemical Quest',
                'nav.game': 'Game',
                'nav.learn': 'Learn',
                'nav.about': 'About',
                'nav.privacy': 'Privacy',
                'nav.contact': 'Contact',
                'hero.title': 'Create Chemical Formulas!',
                'hero.subtitle': 'From H‚ÇÇO to complex compounds, master chemistry with puzzles',
                'hero.start': 'Start Game',
                'hero.learn': 'Learning Mode',
                'game.title': 'Chemical Formula Puzzle',
                'game.description': 'Combine elements to create correct chemical formulas',
                'game.target': 'Target Compound:',
                'game.formula': 'Your Formula:',
                'game.drop_elements': 'Drag elements here',
                'game.check': 'Check Formula',
                'game.clear': 'Clear',
                'game.hint': 'Hint',
                'game.elements': 'Available Elements',
                'common.coming_soon': 'Coming Soon'
            }
        };

        // ÂàùÊúüÂåñ
        function initializeApp() {
            console.log('üì± „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ÂàùÊúüÂåñ');
            
            // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Åã„ÇâË®≠ÂÆö„ÇíË™≠„ÅøËæº„Åø
            loadSettings();
            
            // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº„ÇíË®≠ÂÆö
            setupEventListeners();
            
            // UIÂàùÊúüÂåñ
            initializeUI();
            
            // ÂÖÉÁ¥†„Éë„É¨„ÉÉ„Éà‰ΩúÊàê
            createElementPalette();
            
            // PWAÁôªÈå≤
            registerServiceWorker();
            
            console.log('‚úÖ ÂàùÊúüÂåñÂÆå‰∫Ü');
        }

        // Ë®≠ÂÆöË™≠„ÅøËæº„Åø
        function loadSettings() {
            console.log('‚öôÔ∏è Ë®≠ÂÆöË™≠„ÅøËæº„Åø');
            
            const saved = localStorage.getItem('chemicalQuest_settings');
            if (saved) {
                gameState.settings = { ...gameState.settings, ...JSON.parse(saved) };
            }
            
            // Ë®ÄË™ûË®≠ÂÆöÈÅ©Áî®
            document.getElementById('languageSelect').value = gameState.settings.language;
            
            // „Éï„Ç©„É≥„Éà„Çµ„Ç§„Ç∫Ë®≠ÂÆöÈÅ©Áî®
            document.getElementById('fontSizeSelect').value = gameState.settings.fontSize;
            document.body.className = `font-size-${gameState.settings.fontSize}`;
            
            // „ÉÜ„Éº„ÉûË®≠ÂÆöÈÅ©Áî®
            if (gameState.settings.theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            // Â±•Ê≠¥Ë™≠„ÅøËæº„Åø
            const history = localStorage.getItem('chemicalQuest_history');
            if (history) {
                gameState.gameHistory = JSON.parse(history);
                updateStats();
            }
        }

        // Ë®≠ÂÆö‰øùÂ≠ò
        function saveSettings() {
            localStorage.setItem('chemicalQuest_settings', JSON.stringify(gameState.settings));
            console.log('üíæ Ë®≠ÂÆö‰øùÂ≠òÂÆå‰∫Ü');
        }

        // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„ÉºË®≠ÂÆö
        function setupEventListeners() {
            console.log('üéØ „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„ÉºË®≠ÂÆö');
            
            // „É°„Éã„É•„Éº„Éà„Ç∞„É´
            document.getElementById('menuToggle').addEventListener('click', toggleMobileMenu);
            
            // „Ç≤„Éº„É†ÈñãÂßã„Éú„Çø„É≥
            document.getElementById('startGameBtn').addEventListener('click', startGame);
            document.getElementById('learnModeBtn').addEventListener('click', startLearnMode);
            
            // „Ç≤„Éº„É†„Ç≥„É≥„Éà„É≠„Éº„É´
            document.getElementById('checkFormulaBtn').addEventListener('click', checkFormula);
            document.getElementById('clearFormulaBtn').addEventListener('click', clearFormula);
            document.getElementById('hintBtn').addEventListener('click', showHint);
            
            // Ë®≠ÂÆöÂ§âÊõ¥
            document.getElementById('languageSelect').addEventListener('change', changeLanguage);
            document.getElementById('fontSizeSelect').addEventListener('change', changeFontSize);
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            
            // SNS„Ç∑„Çß„Ç¢
            document.getElementById('shareTwitter').addEventListener('click', shareToTwitter);
            document.getElementById('shareFacebook').addEventListener('click', shareToFacebook);
            document.getElementById('shareLine').addEventListener('click', shareToLine);
            document.getElementById('copyLink').addEventListener('click', copyLink);
            
            // „É¢„Éê„Ç§„É´„Çµ„Ç§„Éâ„Éê„Éº„ÅÆÂ§ñÂÅ¥„ÇØ„É™„ÉÉ„ÇØ
            document.addEventListener('click', (e) => {
                const sidebar = document.getElementById('mobileSidebar');
                const menuToggle = document.getElementById('menuToggle');
                if (!sidebar.contains(e.target) && !menuToggle.contains(e.target)) {
                    sidebar.classList.remove('open');
                }
            });
        }

        // UIÂàùÊúüÂåñ
        function initializeUI() {
            console.log('üé® UIÂàùÊúüÂåñ');
            updateLanguage();
            updateTimer();
            updateScore();
        }

        // Â§öË®ÄË™ûÊõ¥Êñ∞
        function updateLanguage() {
            const lang = gameState.settings.language;
            const elements = document.querySelectorAll('[data-i18n]');
            
            elements.forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
        }

        // ÂÖÉÁ¥†„Éë„É¨„ÉÉ„Éà‰ΩúÊàê
        function createElementPalette() {
            console.log('üî¨ ÂÖÉÁ¥†„Éë„É¨„ÉÉ„Éà‰ΩúÊàê');
            
            const palette = document.getElementById('elementPalette');
            palette.innerHTML = '';
            
            gameState.elements.forEach((element, index) => {
                const card = document.createElement('div');
                card.className = 'element-card p-4 text-center cursor-pointer';
                card.draggable = true;
                card.innerHTML = `
                    <div class="text-2xl font-bold mb-1">${element.symbol}</div>
                    <div class="text-xs opacity-80">${gameState.settings.language === 'ja' ? element.nameJa : element.name}</div>
                    <div class="text-xs mt-1">ÊÆã„Çä: ${element.available}</div>
                `;
                
                // „Éâ„É©„ÉÉ„Ç∞„Ç§„Éô„É≥„Éà
                card.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', JSON.stringify(element));
                    console.log(`üîÑ „Éâ„É©„ÉÉ„Ç∞ÈñãÂßã: ${element.symbol}`);
                });
                
                // „ÇØ„É™„ÉÉ„ÇØ„Ç§„Éô„É≥„Éà
                card.addEventListener('click', () => {
                    selectElement(element, card);
                });
                
                palette.appendChild(card);
            });
        }

        // ÂÖÉÁ¥†ÈÅ∏Êäû
        function selectElement(element, cardElement) {
            if (element.available <= 0) {
                console.warn(`‚ö†Ô∏è ${element.symbol}„ÅØÂà©Áî®„Åß„Åç„Åæ„Åõ„Çì`);
                return;
            }
            
            console.log(`‚úÖ ÂÖÉÁ¥†ÈÅ∏Êäû: ${element.symbol}`);
            
            // Âà©Áî®ÂèØËÉΩÊï∞„ÇíÊ∏õ„Çâ„Åô
            element.available--;
            
            // ÈÅ∏ÊäûÊ∏à„ÅøÂÖÉÁ¥†„Å´ËøΩÂä†
            gameState.selectedElements.push({ ...element });
            
            // UI„ÇíÊõ¥Êñ∞
            updateFormulaBuilder();
            createElementPalette();
        }

        // ÂåñÂ≠¶Âºè„Éì„É´„ÉÄ„ÉºÊõ¥Êñ∞
        function updateFormulaBuilder() {
            const builder = document.getElementById('formulaBuilder');
            
            if (gameState.selectedElements.length === 0) {
                builder.innerHTML = '<span class="text-gray-400" data-i18n="game.drop_elements">ÂÖÉÁ¥†„Çí„Åì„Åì„Å´„Éâ„É©„ÉÉ„Ç∞</span>';
                builder.classList.remove('valid', 'invalid');
                return;
            }
            
            // ÂåñÂ≠¶Âºè„ÇíÊßãÁØâ
            const formulaMap = {};
            gameState.selectedElements.forEach(element => {
                formulaMap[element.symbol] = (formulaMap[element.symbol] || 0) + 1;
            });
            
            let formula = '';
            Object.entries(formulaMap).forEach(([symbol, count]) => {
                formula += symbol;
                if (count > 1) {
                    formula += count.toString().split('').map(d => 
                        String.fromCharCode(0x2080 + parseInt(d))
                    ).join('');
                }
            });
            
            gameState.currentFormula = formula;
            builder.innerHTML = `<span class="text-2xl font-mono">${formula}</span>`;
            
            console.log(`üß™ ÁèæÂú®„ÅÆÂåñÂ≠¶Âºè: ${formula}`);
        }

        // ÂåñÂ≠¶Âºè„ÉÅ„Çß„ÉÉ„ÇØ
        function checkFormula() {
            console.log(`üîç ÂåñÂ≠¶Âºè„ÉÅ„Çß„ÉÉ„ÇØ: ${gameState.currentFormula}`);
            
            if (!gameState.currentFormula) {
                alert(gameState.settings.language === 'ja' ? 
                    'ÂåñÂ≠¶Âºè„Çí‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑ' : 'Please create a formula first');
                return;
            }
            
            const builder = document.getElementById('formulaBuilder');
            gameState.totalAttempts++;
            
            if (gameState.currentFormula === gameState.targetMolecule.formula) {
                console.log('üéâ Ê≠£Ëß£ÔºÅ');
                builder.classList.add('valid');
                builder.classList.remove('invalid');
                
                gameState.correctAnswers++;
                gameState.score += 100;
                
                // ÊàêÂäüÈü≥ÔºàÂ∞ÜÊù•ÂÆüË£ÖÔºâ
                showSuccessMessage();
                nextLevel();
                
            } else {
                console.log('‚ùå ‰∏çÊ≠£Ëß£');
                builder.classList.add('invalid');
                builder.classList.remove('valid');
                
                showFailureMessage();
            }
            
            updateStats();
            saveGameHistory();
        }

        // ÂåñÂ≠¶Âºè„ÇØ„É™„Ç¢
        function clearFormula() {
            console.log('üóëÔ∏è ÂåñÂ≠¶Âºè„ÇØ„É™„Ç¢');
            
            // ÈÅ∏ÊäûÊ∏à„ÅøÂÖÉÁ¥†„ÇíÂÖÉ„Å´Êàª„Åô
            gameState.selectedElements.forEach(element => {
                const original = gameState.elements.find(e => e.symbol === element.symbol);
                if (original) {
                    original.available++;
                }
            });
            
            gameState.selectedElements = [];
            gameState.currentFormula = '';
            
            updateFormulaBuilder();
            createElementPalette();
        }

        // „Éí„É≥„ÉàË°®Á§∫
        function showHint() {
            console.log('üí° „Éí„É≥„ÉàË°®Á§∫');
            
            const hints = {
                'H‚ÇÇO': ['Ê∞¥„ÅØÊ∞¥Á¥†2„Å§„Å®ÈÖ∏Á¥†1„Å§„ÅßÊßãÊàê„Åï„Çå„Å¶„ÅÑ„Åæ„Åô', 'H„Çí2„Å§„ÄÅO„Çí1„Å§‰Ωø„Å£„Å¶„Åè„Å†„Åï„ÅÑ'],
                'NaCl': ['Â°©Âåñ„Éä„Éà„É™„Ç¶„É†ÔºàÈ£üÂ°©Ôºâ„Åß„Åô', '„Éä„Éà„É™„Ç¶„É†„Å®Â°©Á¥†„Çí1„Å§„Åö„Å§'],
                'CO‚ÇÇ': ['‰∫åÈÖ∏ÂåñÁÇ≠Á¥†„Åß„Åô', 'ÁÇ≠Á¥†1„Å§„Å®ÈÖ∏Á¥†2„Å§„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„Å¶„Åè„Å†„Åï„ÅÑ']
            };
            
            const hint = hints[gameState.targetMolecule.formula];
            if (hint) {
                const message = gameState.settings.language === 'ja' ? hint[0] : hint[1];
                alert(message);
            } else {
                alert('„Éí„É≥„Éà„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì');
            }
        }

        // „Ç≤„Éº„É†ÈñãÂßã
        function startGame() {
            console.log('üéÆ „Ç≤„Éº„É†ÈñãÂßã');
            
            gameState.isGameActive = true;
            gameState.timeRemaining = 300; // 5ÂàÜ
            gameState.score = 0;
            gameState.currentLevel = 1;
            
            // ÊúÄÂàù„ÅÆ„Çø„Éº„Ç≤„ÉÉ„ÉàÂàÜÂ≠ê„ÇíË®≠ÂÆö
            setRandomTarget();
            
            // „Çø„Ç§„Éû„ÉºÈñãÂßã
            startTimer();
            
            updateScore();
            
            // „Ç≤„Éº„É†„Çª„ÇØ„Ç∑„Éß„É≥„Å´„Çπ„ÇØ„É≠„Éº„É´
            document.getElementById('game').scrollIntoView({ behavior: 'smooth' });
        }

        // Â≠¶Áøí„É¢„Éº„ÉâÈñãÂßã
        function startLearnMode() {
            console.log('üìö Â≠¶Áøí„É¢„Éº„ÉâÈñãÂßã');
            document.getElementById('learn').scrollIntoView({ behavior: 'smooth' });
        }

        // „É©„É≥„ÉÄ„É†„Çø„Éº„Ç≤„ÉÉ„ÉàË®≠ÂÆö
        function setRandomTarget() {
            const targets = [
                { formula: 'H‚ÇÇO', name: 'Ê∞¥', nameEn: 'Water' },
                { formula: 'NaCl', name: 'Â°©Âåñ„Éä„Éà„É™„Ç¶„É†', nameEn: 'Sodium Chloride' },
                { formula: 'CO‚ÇÇ', name: '‰∫åÈÖ∏ÂåñÁÇ≠Á¥†', nameEn: 'Carbon Dioxide' },
                { formula: 'NH‚ÇÉ', name: '„Ç¢„É≥„É¢„Éã„Ç¢', nameEn: 'Ammonia' },
                { formula: 'CaCl‚ÇÇ', name: 'Â°©Âåñ„Ç´„É´„Ç∑„Ç¶„É†', nameEn: 'Calcium Chloride' }
            ];
            
            gameState.targetMolecule = targets[Math.floor(Math.random() * targets.length)];
            
            const targetDiv = document.getElementById('targetMolecule');
            targetDiv.innerHTML = `
                <span class="text-2xl font-mono">${gameState.targetMolecule.formula}</span>
                <p class="text-sm mt-2 opacity-80">
                    ${gameState.settings.language === 'ja' ? gameState.targetMolecule.name : gameState.targetMolecule.nameEn}
                </p>
            `;
            
            console.log(`üéØ Êñ∞„Åó„ÅÑ„Çø„Éº„Ç≤„ÉÉ„Éà: ${gameState.targetMolecule.formula}`);
        }

        // Ê¨°„ÅÆ„É¨„Éô„É´
        function nextLevel() {
            setTimeout(() => {
                gameState.currentLevel++;
                clearFormula();
                setRandomTarget();
                document.getElementById('currentLevel').textContent = gameState.currentLevel;
                
                console.log(`üìà „É¨„Éô„É´„Ç¢„ÉÉ„Éó: ${gameState.currentLevel}`);
            }, 2000);
        }

        // ÊàêÂäü„É°„ÉÉ„Çª„Éº„Ç∏
        function showSuccessMessage() {
            const message = gameState.settings.language === 'ja' ? 
                'Ê≠£Ëß£„Åß„ÅôÔºÅÁ¥†Êô¥„Çâ„Åó„ÅÑÔºÅ' : 'Correct! Great job!';
            
            // ‰∏ÄÊôÇÁöÑ„Å™ÊàêÂäüË°®Á§∫ÔºàÂ∞ÜÊù•„ÅØ„É¢„Éº„ÉÄ„É´„ÅßÔºâ
            const builder = document.getElementById('formulaBuilder');
            const original = builder.innerHTML;
            builder.innerHTML = `<div class="text-green-600 font-bold text-xl">${message}</div>`;
            
            setTimeout(() => {
                builder.innerHTML = original;
            }, 2000);
        }

        // Â§±Êïó„É°„ÉÉ„Çª„Éº„Ç∏
        function showFailureMessage() {
            const message = gameState.settings.language === 'ja' ? 
                'ÊÉú„Åó„ÅÑÔºÅ„ÇÇ„ÅÜ‰∏ÄÂ∫¶ÊåëÊà¶ÔºÅ' : 'Close! Try again!';
            
            const builder = document.getElementById('formulaBuilder');
            const original = builder.innerHTML;
            builder.innerHTML = `<div class="text-red-600 font-bold text-xl">${message}</div>`;
            
            setTimeout(() => {
                builder.innerHTML = original;
            }, 2000);
        }

        // „Çø„Ç§„Éû„ÉºÈñãÂßã
        function startTimer() {
            const timer = setInterval(() => {
                if (!gameState.isGameActive || gameState.timeRemaining <= 0) {
                    clearInterval(timer);
                    if (gameState.timeRemaining <= 0) {
                        endGame();
                    }
                    return;
                }
                
                gameState.timeRemaining--;
                updateTimer();
            }, 1000);
        }

        // „Çø„Ç§„Éû„ÉºÊõ¥Êñ∞
        function updateTimer() {
            const minutes = Math.floor(gameState.timeRemaining / 60);
            const seconds = gameState.timeRemaining % 60;
            const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timer').textContent = display;
        }

        // „Çπ„Ç≥„Ç¢Êõ¥Êñ∞
        function updateScore() {
            document.getElementById('currentScore').textContent = gameState.score;
            document.getElementById('currentLevel').textContent = gameState.currentLevel;
        }

        // Áµ±Ë®àÊõ¥Êñ∞
        function updateStats() {
            const accuracy = gameState.totalAttempts > 0 ? 
                Math.round((gameState.correctAnswers / gameState.totalAttempts) * 100) : 0;
            
            document.getElementById('correctCount').textContent = gameState.correctAnswers;
            document.getElementById('accuracyRate').textContent = `${accuracy}%`;
        }

        // „Ç≤„Éº„É†Â±•Ê≠¥‰øùÂ≠ò
        function saveGameHistory() {
            const record = {
                timestamp: new Date().toISOString(),
                score: gameState.score,
                level: gameState.currentLevel,
                accuracy: gameState.totalAttempts > 0 ? 
                    Math.round((gameState.correctAnswers / gameState.totalAttempts) * 100) : 0
            };
            
            gameState.gameHistory.push(record);
            localStorage.setItem('chemicalQuest_history', JSON.stringify(gameState.gameHistory));
            console.log('üìä „Ç≤„Éº„É†Â±•Ê≠¥‰øùÂ≠ò');
        }

        // „Ç≤„Éº„É†ÁµÇ‰∫Ü
        function endGame() {
            console.log('üèÅ „Ç≤„Éº„É†ÁµÇ‰∫Ü');
            gameState.isGameActive = false;
            
            const message = gameState.settings.language === 'ja' ? 
                `„Ç≤„Éº„É†ÁµÇ‰∫ÜÔºÅ\n„Çπ„Ç≥„Ç¢: ${gameState.score}\n„É¨„Éô„É´: ${gameState.currentLevel}\nÊ≠£Ëß£Áéá: ${Math.round((gameState.correctAnswers / gameState.totalAttempts) * 100)}%` :
                `Game Over!\nScore: ${gameState.score}\nLevel: ${gameState.currentLevel}\nAccuracy: ${Math.round((gameState.correctAnswers / gameState.totalAttempts) * 100)}%`;
            
            alert(message);
            saveGameHistory();
        }

        // „É¢„Éê„Ç§„É´„É°„Éã„É•„Éº„Éà„Ç∞„É´
        function toggleMobileMenu() {
            const sidebar = document.getElementById('mobileSidebar');
            sidebar.classList.toggle('open');
            console.log('üì± „É¢„Éê„Ç§„É´„É°„Éã„É•„Éº„Éà„Ç∞„É´');
        }

        // Ë®ÄË™ûÂ§âÊõ¥
        function changeLanguage() {
            const newLang = document.getElementById('languageSelect').value;
            gameState.settings.language = newLang;
            updateLanguage();
            saveSettings();
            console.log(`üåê Ë®ÄË™ûÂ§âÊõ¥: ${newLang}`);
        }

        // „Éï„Ç©„É≥„Éà„Çµ„Ç§„Ç∫Â§âÊõ¥
        function changeFontSize() {
            const newSize = document.getElementById('fontSizeSelect').value;
            gameState.settings.fontSize = newSize;
            document.body.className = `font-size-${newSize}`;
            saveSettings();
            console.log(`üìù „Éï„Ç©„É≥„Éà„Çµ„Ç§„Ç∫Â§âÊõ¥: ${newSize}`);
        }

        // „ÉÜ„Éº„ÉûÂàá„ÇäÊõø„Åà
        function toggleTheme() {
            const currentTheme = gameState.settings.theme;
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            gameState.settings.theme = newTheme;
            
            if (newTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                document.documentElement.removeAttribute('data-theme');
                document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i>';
            }
            
            saveSettings();
            console.log(`üé® „ÉÜ„Éº„ÉûÂ§âÊõ¥: ${newTheme}`);
        }

        // SNS„Ç∑„Çß„Ç¢Ê©üËÉΩ
        function shareToTwitter() {
            const text = encodeURIComponent(`„Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà„Åß„Çπ„Ç≥„Ç¢ ${gameState.score}ÁÇπ„ÇíÈÅîÊàêÔºÅüß™ #„Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà #ÂåñÂ≠¶„Éë„Ç∫„É´`);
            const url = encodeURIComponent(window.location.href);
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
            console.log('üì± Twitter„Ç∑„Çß„Ç¢');
        }

        function shareToFacebook() {
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
            console.log('üì± Facebook„Ç∑„Çß„Ç¢');
        }

        function shareToLine() {
            const text = encodeURIComponent(`„Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà„Åß„Çπ„Ç≥„Ç¢ ${gameState.score}ÁÇπ„ÇíÈÅîÊàêÔºÅ`);
            const url = encodeURIComponent(window.location.href);
            window.open(`https://line.me/R/msg/text/?${text}%0D%0A${url}`, '_blank');
            console.log('üì± LINE„Ç∑„Çß„Ç¢');
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert(gameState.settings.language === 'ja' ? 
                    '„É™„É≥„ÇØ„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ' : 'Link copied!');
                console.log('üîó „É™„É≥„ÇØ„Ç≥„Éî„ÉºÂÆå‰∫Ü');
            });
        }

        // Service WorkerÁôªÈå≤
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js')
                    .then(() => console.log('üîß Service WorkerÁôªÈå≤ÂÆå‰∫Ü'))
                    .catch(err => console.log('‚ùå Service WorkerÁôªÈå≤Â§±Êïó:', err));
            }
        }

        // „Éâ„É©„ÉÉ„Ç∞&„Éâ„É≠„ÉÉ„ÉóË®≠ÂÆö
        function setupDragAndDrop() {
            const builder = document.getElementById('formulaBuilder');
            
            builder.addEventListener('dragover', (e) => {
                e.preventDefault();
                builder.classList.add('bg-blue-100');
            });
            
            builder.addEventListener('dragleave', () => {
                builder.classList.remove('bg-blue-100');
            });
            
            builder.addEventListener('drop', (e) => {
                e.preventDefault();
                builder.classList.remove('bg-blue-100');
                
                try {
                    const elementData = JSON.parse(e.dataTransfer.getData('text/plain'));
                    selectElement(elementData, null);
                } catch (error) {
                    console.error('‚ùå „Éâ„É©„ÉÉ„Ç∞„Éá„Éº„ÇøËß£Êûê„Ç®„É©„Éº:', error);
                }
            });
        }

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂÆå‰∫ÜÊôÇ„Å´ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂÆå‰∫Ü');
            initializeApp();
            setupDragAndDrop();
        });

        // „Éö„Éº„Ç∏Èõ¢ËÑ±Ââç„Å´Áä∂ÊÖã„Çí‰øùÂ≠ò
        window.addEventListener('beforeunload', () => {
            saveSettings();
            saveGameHistory();
        });

        console.log('‚úÖ „Ç±„Éü„Ç´„É´„ÇØ„Ç®„Çπ„Éà - „Çπ„ÇØ„É™„Éó„ÉàË™≠„ÅøËæº„ÅøÂÆå‰∫Ü');
    </script>
</body>
</html>
