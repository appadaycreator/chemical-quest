<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆ - åŒ–å­¦å¼ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ  | å…ƒç´ è¨˜å·ã§å­¦ã¶åŒ–å­¦</title>
    <meta name="description" content="å…ƒç´ è¨˜å·ã‚’çµ„ã¿åˆã‚ã›ã¦åŒ–å­¦å¼ã‚’ä½œã‚‹æ•™è‚²çš„ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ã€‚Hâ‚‚Oã‹ã‚‰è¤‡é›‘ãªåŒ–åˆç‰©ã¾ã§ã€æ¥½ã—ãåŒ–å­¦ã®åŸºç¤ã‚’å­¦ã¹ã¾ã™ã€‚ç„¡æ–™ã§ãƒ—ãƒ¬ã‚¤å¯èƒ½ï¼">
    <meta name="keywords" content="åŒ–å­¦å¼,ãƒ‘ã‚ºãƒ«,ã‚²ãƒ¼ãƒ ,å…ƒç´ ,æ•™è‚²,å­¦ç¿’,åŒ–å­¦,åˆ†å­,åŒ–åˆç‰©,ç†ç§‘">
    
    <!-- OGPè¨­å®š -->
    <meta property="og:title" content="ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆ - åŒ–å­¦å¼ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ">
    <meta property="og:description" content="å…ƒç´ è¨˜å·ã§åŒ–å­¦å¼ã‚’ä½œã‚‹ï¼æ¥½ã—ãå­¦ã¹ã‚‹åŒ–å­¦ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://appadaycreator.github.io/chemical-quest/">
    <meta property="og:image" content="https://appadaycreator.github.io/chemical-quest/ogp.png">
    <meta property="og:site_name" content="ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆ">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆ - åŒ–å­¦å¼ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ">
    <meta name="twitter:description" content="å…ƒç´ è¨˜å·ã§åŒ–å­¦å¼ã‚’ä½œã‚‹ï¼æ¥½ã—ãå­¦ã¹ã‚‹åŒ–å­¦ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ">
    <meta name="twitter:image" content="https://appadaycreator.github.io/chemical-quest/ogp.png">
    
    <!-- PWAè¨­å®š -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1e40af">
    <link rel="icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- CDNãƒ©ã‚¤ãƒ–ãƒ©ãƒª -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TXQGZRF9');</script>
    <!-- End Google Tag Manager -->

    <style>
        :root {
            --primary-color: #1e40af;
            --secondary-color: #3b82f6;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --text-primary: #1f2937;
            --text-secondary: #6b7280;
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --border-color: #e5e7eb;
        }

        [data-theme="dark"] {
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --border-color: #374151;
        }

        body {
            font-family: 'Noto Sans JP', 'Roboto', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .font-size-xs { font-size: 0.75rem; }
        .font-size-sm { font-size: 0.875rem; }
        .font-size-base { font-size: 1rem; }
        .font-size-lg { font-size: 1.125rem; }
        .font-size-xl { font-size: 1.5rem; }

        .element-card {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            border-radius: 12px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .element-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        }

        .element-card.selected {
            background: linear-gradient(135deg, var(--accent-color), #f97316);
            transform: scale(1.05);
        }

        .molecule-display {
            background: var(--bg-secondary);
            border: 2px dashed var(--border-color);
            border-radius: 16px;
            min-height: 120px;
            transition: all 0.3s ease;
        }

        .molecule-display.valid {
            border-color: var(--success-color);
            background: rgba(16, 185, 129, 0.1);
        }

        .molecule-display.invalid {
            border-color: var(--danger-color);
            background: rgba(239, 68, 68, 0.1);
        }

        .sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .sidebar.open {
            transform: translateX(0);
        }

        .game-board {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 24px;
            padding: 2rem;
            color: white;
        }

        .periodic-table-mini {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 4px;
            max-width: 400px;
        }

        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="font-size-base">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TXQGZRF9"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Header -->
    <header class="bg-white shadow-lg fixed w-full top-0 z-50" style="background: var(--bg-primary);">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <button id="menuToggle" class="lg:hidden text-2xl">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="text-2xl font-bold text-blue-600 flex items-center">
                        <svg class="w-8 h-8 mr-2" viewBox="0 0 100 100" fill="currentColor">
                            <circle cx="25" cy="25" r="8" fill="#3b82f6"/>
                            <circle cx="75" cy="25" r="8" fill="#ef4444"/>
                            <circle cx="50" cy="75" r="8" fill="#10b981"/>
                            <line x1="25" y1="25" x2="75" y2="25" stroke="currentColor" stroke-width="2"/>
                            <line x1="33" y1="33" x2="42" y2="67" stroke="currentColor" stroke-width="2"/>
                            <line x1="67" y1="33" x2="58" y2="67" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span data-i18n="app.title">ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆ</span>
                    </h1>
                </div>
                
                <nav class="hidden lg:flex space-x-6">
                    <a href="#game" class="hover:text-blue-600 transition" data-i18n="nav.game">ã‚²ãƒ¼ãƒ </a>
                    <a href="#learn" class="hover:text-blue-600 transition" data-i18n="nav.learn">å­¦ç¿’</a>
                    <a href="#about" class="hover:text-blue-600 transition" data-i18n="nav.about">ä½¿ã„æ–¹</a>
                    <a href="#privacy" class="hover:text-blue-600 transition" data-i18n="nav.privacy">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼</a>
                    <a href="#contact" class="hover:text-blue-600 transition" data-i18n="nav.contact">ãŠå•ã„åˆã‚ã›</a>
                </nav>

                <div class="flex items-center space-x-4">
                    <select id="languageSelect" class="border rounded px-2 py-1">
                        <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                        <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                    </select>
                    
                    <select id="fontSizeSelect" class="border rounded px-2 py-1">
                        <option value="xs">æ¥µå°</option>
                        <option value="sm">å°</option>
                        <option value="base" selected>æ¨™æº–</option>
                        <option value="lg">å¤§</option>
                        <option value="xl">ç‰¹å¤§</option>
                    </select>
                    
                    <button id="themeToggle" class="text-xl">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Sidebar -->
    <div id="mobileSidebar" class="fixed inset-y-0 left-0 z-40 w-64 bg-white shadow-lg sidebar lg:hidden" style="background: var(--bg-primary);">
        <div class="p-4 border-b">
            <h2 class="font-bold text-lg" data-i18n="menu.title">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h2>
        </div>
        <nav class="p-4 space-y-4">
            <a href="#game" class="block hover:text-blue-600 transition" data-i18n="nav.game">ã‚²ãƒ¼ãƒ </a>
            <a href="#learn" class="block hover:text-blue-600 transition" data-i18n="nav.learn">å­¦ç¿’</a>
            <a href="#about" class="block hover:text-blue-600 transition" data-i18n="nav.about">ä½¿ã„æ–¹</a>
            <a href="#privacy" class="block hover:text-blue-600 transition" data-i18n="nav.privacy">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼</a>
            <a href="#contact" class="block hover:text-blue-600 transition" data-i18n="nav.contact">ãŠå•ã„åˆã‚ã›</a>
        </nav>
    </div>

    <!-- Main Content -->
    <main class="pt-16">
        <!-- Hero Section -->
        <section class="bg-gradient-to-br from-blue-600 to-purple-700 text-white py-20">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-5xl font-bold mb-6 fade-in" data-i18n="hero.title">å…ƒç´ è¨˜å·ã§åŒ–å­¦å¼ã‚’ä½œã‚ã†ï¼</h2>
                <p class="text-xl mb-8 opacity-90 fade-in" data-i18n="hero.subtitle">Hâ‚‚Oã‹ã‚‰è¤‡é›‘ãªåŒ–åˆç‰©ã¾ã§ã€ãƒ‘ã‚ºãƒ«ã§åŒ–å­¦ãƒã‚¹ã‚¿ãƒ¼</p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center fade-in">
                    <button id="startGameBtn" class="bg-yellow-500 hover:bg-yellow-600 text-black font-bold py-4 px-8 rounded-full text-lg transition transform hover:scale-105" data-i18n="hero.start">
                        ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ
                    </button>
                    <button id="learnModeBtn" class="bg-transparent border-2 border-white hover:bg-white hover:text-blue-600 font-bold py-4 px-8 rounded-full text-lg transition" data-i18n="hero.learn">
                        å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰
                    </button>
                </div>
            </div>
        </section>

        <!-- Game Section -->
        <section id="game" class="py-16 bg-gray-50" style="background: var(--bg-secondary);">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h3 class="text-3xl font-bold mb-4" data-i18n="game.title">åŒ–å­¦å¼ãƒ‘ã‚ºãƒ«</h3>
                    <p class="text-gray-600 text-lg" data-i18n="game.description">å…ƒç´ ã‚’çµ„ã¿åˆã‚ã›ã¦æ­£ã—ã„åŒ–å­¦å¼ã‚’ä½œã‚Šã¾ã—ã‚‡ã†</p>
                </div>

                <div class="max-w-6xl mx-auto">
                    <div class="grid lg:grid-cols-4 gap-8">
                        <!-- Game Board -->
                        <div class="lg:col-span-3">
                            <div class="game-board">
                                <div class="flex justify-between items-center mb-6">
                                    <div class="flex items-center space-x-4">
                                        <span class="text-lg font-semibold">ãƒ¬ãƒ™ãƒ«: <span id="currentLevel">1</span></span>
                                        <span class="text-lg font-semibold">ã‚¹ã‚³ã‚¢: <span id="currentScore">0</span></span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-clock"></i>
                                        <span id="timer" class="text-lg font-mono">05:00</span>
                                    </div>
                                </div>

                                <!-- Target Molecule -->
                                <div class="mb-6">
                                    <h4 class="text-xl font-semibold mb-3" data-i18n="game.target">ç›®æ¨™åŒ–åˆç‰©:</h4>
                                    <div id="targetMolecule" class="bg-white bg-opacity-20 rounded-lg p-4 text-center">
                                        <span class="text-2xl font-mono">Hâ‚‚O</span>
                                        <p class="text-sm mt-2 opacity-80">æ°´</p>
                                    </div>
                                </div>

                                <!-- Formula Builder -->
                                <div class="mb-6">
                                    <h4 class="text-xl font-semibold mb-3" data-i18n="game.formula">ä½œæˆä¸­ã®åŒ–å­¦å¼:</h4>
                                    <div id="formulaBuilder" class="molecule-display flex items-center justify-center min-h-24 bg-white bg-opacity-20 rounded-lg">
                                        <span class="text-gray-400" data-i18n="game.drop_elements">å…ƒç´ ã‚’ã“ã“ã«ãƒ‰ãƒ©ãƒƒã‚°</span>
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="flex flex-wrap gap-3 justify-center">
                                    <button id="checkFormulaBtn" class="bg-green-500 hover:bg-green-600 px-6 py-3 rounded-lg font-semibold transition" data-i18n="game.check">
                                        åŒ–å­¦å¼ã‚’ãƒã‚§ãƒƒã‚¯
                                    </button>
                                    <button id="clearFormulaBtn" class="bg-red-500 hover:bg-red-600 px-6 py-3 rounded-lg font-semibold transition" data-i18n="game.clear">
                                        ã‚¯ãƒªã‚¢
                                    </button>
                                    <button id="hintBtn" class="bg-blue-500 hover:bg-blue-600 px-6 py-3 rounded-lg font-semibold transition" data-i18n="game.hint">
                                        ãƒ’ãƒ³ãƒˆ
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Element Palette -->
                        <div class="lg:col-span-1">
                            <h4 class="text-xl font-semibold mb-4" data-i18n="game.elements">åˆ©ç”¨å¯èƒ½ãªå…ƒç´ </h4>
                            <div id="elementPalette" class="grid grid-cols-3 gap-2">
                                <!-- å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹å…ƒç´ ã‚«ãƒ¼ãƒ‰ -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Game Stats -->
                <div class="mt-12 max-w-4xl mx-auto">
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="bg-white rounded-lg p-6 text-center shadow-md" style="background: var(--bg-primary);">
                            <i class="fas fa-trophy text-3xl text-yellow-500 mb-3"></i>
                            <h5 class="font-semibold text-lg mb-2" data-i18n="stats.correct">æ­£è§£æ•°</h5>
                            <span id="correctCount" class="text-2xl font-bold text-green-600">0</span>
                        </div>
                        <div class="bg-white rounded-lg p-6 text-center shadow-md" style="background: var(--bg-primary);">
                            <i class="fas fa-chart-line text-3xl text-blue-500 mb-3"></i>
                            <h5 class="font-semibold text-lg mb-2" data-i18n="stats.accuracy">æ­£è§£ç‡</h5>
                            <span id="accuracyRate" class="text-2xl font-bold text-blue-600">0%</span>
                        </div>
                        <div class="bg-white rounded-lg p-6 text-center shadow-md" style="background: var(--bg-primary);">
                            <i class="fas fa-clock text-3xl text-purple-500 mb-3"></i>
                            <h5 class="font-semibold text-lg mb-2" data-i18n="stats.best_time">æœ€çŸ­æ™‚é–“</h5>
                            <span id="bestTime" class="text-2xl font-bold text-purple-600">--:--</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Learning Section -->
        <section id="learn" class="py-16" style="background: var(--bg-primary);">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h3 class="text-3xl font-bold mb-4" data-i18n="learn.title">åŒ–å­¦ã‚’å­¦ã¼ã†</h3>
                    <p class="text-gray-600 text-lg" data-i18n="learn.description">åŸºç¤ã‹ã‚‰å¿œç”¨ã¾ã§ã€æ¥½ã—ãåŒ–å­¦ã‚’å­¦ç¿’</p>
                </div>

                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                    <div class="bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-xl p-6 transform hover:scale-105 transition">
                        <i class="fas fa-atom text-3xl mb-4"></i>
                        <h4 class="text-xl font-semibold mb-3" data-i18n="learn.basics">åŸºç¤åŒ–å­¦</h4>
                        <p class="mb-4" data-i18n="learn.basics_desc">åŸå­ã€åˆ†å­ã€å…ƒç´ ã®åŸºæœ¬æ¦‚å¿µ</p>
                        <button class="bg-white text-blue-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>

                    <div class="bg-gradient-to-br from-green-500 to-green-600 text-white rounded-xl p-6 transform hover:scale-105 transition">
                        <i class="fas fa-link text-3xl mb-4"></i>
                        <h4 class="text-xl font-semibold mb-3" data-i18n="learn.bonds">åŒ–å­¦çµåˆ</h4>
                        <p class="mb-4" data-i18n="learn.bonds_desc">ã‚¤ã‚ªãƒ³çµåˆã€å…±æœ‰çµåˆã€é‡‘å±çµåˆ</p>
                        <button class="bg-white text-green-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>

                    <div class="bg-gradient-to-br from-purple-500 to-purple-600 text-white rounded-xl p-6 transform hover:scale-105 transition">
                        <i class="fas fa-flask text-3xl mb-4"></i>
                        <h4 class="text-xl font-semibold mb-3" data-i18n="learn.reactions">åŒ–å­¦åå¿œ</h4>
                        <p class="mb-4" data-i18n="learn.reactions_desc">åå¿œå¼ã®æ›¸ãæ–¹ã¨ãƒãƒ©ãƒ³ã‚¹</p>
                        <button class="bg-white text-purple-600 px-4 py-2 rounded-lg font-semibold hover:bg-gray-100 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>
                </div>

                <!-- Periodic Table Preview -->
                <div class="mt-16 text-center">
                    <h4 class="text-2xl font-bold mb-8" data-i18n="learn.periodic_table">å‘¨æœŸè¡¨</h4>
                    <div class="bg-gray-100 rounded-xl p-8 max-w-4xl mx-auto" style="background: var(--bg-secondary);">
                        <div class="periodic-table-mini mx-auto">
                            <!-- æœ€åˆã®æ•°å€‹ã®å…ƒç´ ã®ã¿è¡¨ç¤º -->
                        </div>
                        <p class="mt-4 text-gray-600" data-i18n="learn.periodic_note">ã‚¯ãƒªãƒƒã‚¯ã—ã¦å…ƒç´ ã®è©³ç´°ã‚’è¦‹ã‚‹ï¼ˆå®Ÿè£…äºˆå®šï¼‰</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SNS Share Section -->
        <section class="py-16 bg-gradient-to-r from-pink-500 to-orange-500 text-white">
            <div class="container mx-auto px-4 text-center">
                <h3 class="text-3xl font-bold mb-6" data-i18n="share.title">çµæœã‚’ã‚·ã‚§ã‚¢ã—ã‚ˆã†ï¼</h3>
                <div class="flex flex-wrap justify-center gap-4 mb-8">
                    <button id="shareTwitter" class="bg-blue-400 hover:bg-blue-500 px-6 py-3 rounded-lg font-semibold transition flex items-center">
                        <i class="fab fa-twitter mr-2"></i>
                        Twitter
                    </button>
                    <button id="shareFacebook" class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-semibold transition flex items-center">
                        <i class="fab fa-facebook-f mr-2"></i>
                        Facebook
                    </button>
                    <button id="shareLine" class="bg-green-500 hover:bg-green-600 px-6 py-3 rounded-lg font-semibold transition flex items-center">
                        <i class="fab fa-line mr-2"></i>
                        LINE
                    </button>
                    <button id="copyLink" class="bg-gray-700 hover:bg-gray-800 px-6 py-3 rounded-lg font-semibold transition flex items-center">
                        <i class="fas fa-link mr-2"></i>
                        <span data-i18n="share.copy">ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Affiliate Section -->
        <section class="py-16 bg-gray-100" style="background: var(--bg-secondary);">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h3 class="text-3xl font-bold mb-4" data-i18n="affiliate.title">ãŠã™ã™ã‚åŒ–å­¦ã‚°ãƒƒã‚º</h3>
                    <p class="text-gray-600" data-i18n="affiliate.description">å­¦ç¿’ã‚’ã•ã‚‰ã«æ·±ã‚ã‚‹å‚è€ƒæ›¸ã‚„å®Ÿé¨“ã‚­ãƒƒãƒˆ</p>
                </div>

                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
                    <!-- ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆå•†å“ã¯å¾Œã§è¨­å®š -->
                    <div class="bg-white rounded-lg p-6 shadow-md text-center" style="background: var(--bg-primary);">
                        <i class="fas fa-book text-4xl text-blue-500 mb-4"></i>
                        <h4 class="font-semibold mb-2" data-i18n="affiliate.chemistry_book">åŒ–å­¦å‚è€ƒæ›¸</h4>
                        <p class="text-gray-600 text-sm mb-4" data-i18n="affiliate.book_desc">åŸºç¤ã‹ã‚‰å¿œç”¨ã¾ã§å­¦ã¹ã‚‹</p>
                        <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>

                    <div class="bg-white rounded-lg p-6 shadow-md text-center" style="background: var(--bg-primary);">
                        <i class="fas fa-table text-4xl text-green-500 mb-4"></i>
                        <h4 class="font-semibold mb-2" data-i18n="affiliate.periodic_poster">å‘¨æœŸè¡¨ãƒã‚¹ã‚¿ãƒ¼</h4>
                        <p class="text-gray-600 text-sm mb-4" data-i18n="affiliate.poster_desc">éƒ¨å±‹ã«è²¼ã£ã¦è¦šãˆã‚ˆã†</p>
                        <button class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>

                    <div class="bg-white rounded-lg p-6 shadow-md text-center" style="background: var(--bg-primary);">
                        <i class="fas fa-flask text-4xl text-purple-500 mb-4"></i>
                        <h4 class="font-semibold mb-2" data-i18n="affiliate.experiment_kit">å®Ÿé¨“ã‚­ãƒƒãƒˆ</h4>
                        <p class="text-gray-600 text-sm mb-4" data-i18n="affiliate.kit_desc">å®‰å…¨ã«å®Ÿé¨“ä½“é¨“</p>
                        <button class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>

                    <div class="bg-white rounded-lg p-6 shadow-md text-center" style="background: var(--bg-primary);">
                        <i class="fas fa-atom text-4xl text-red-500 mb-4"></i>
                        <h4 class="font-semibold mb-2" data-i18n="affiliate.molecular_model">åˆ†å­æ¨¡å‹</h4>
                        <p class="text-gray-600 text-sm mb-4" data-i18n="affiliate.model_desc">ç«‹ä½“çš„ã«ç†è§£ã—ã‚ˆã†</p>
                        <button class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition" data-i18n="common.coming_soon">
                            Coming Soon
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h4 class="text-xl font-bold mb-4" data-i18n="footer.about">ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆã«ã¤ã„ã¦</h4>
                    <p class="text-gray-400 mb-4" data-i18n="footer.about_text">
                        å…ƒç´ è¨˜å·ã§åŒ–å­¦å¼ã‚’ä½œã‚‹æ•™è‚²çš„ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ã€‚æ¥½ã—ãåŒ–å­¦ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚
                    </p>
                </div>
                <div>
                    <h4 class="text-xl font-bold mb-4" data-i18n="footer.links">ãƒªãƒ³ã‚¯</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#about" class="hover:text-white transition" data-i18n="nav.about">ä½¿ã„æ–¹</a></li>
                        <li><a href="#privacy" class="hover:text-white transition" data-i18n="nav.privacy">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a></li>
                        <li><a href="#terms" class="hover:text-white transition" data-i18n="nav.terms">åˆ©ç”¨è¦ç´„</a></li>
                        <li><a href="#contact" class="hover:text-white transition" data-i18n="nav.contact">ãŠå•ã„åˆã‚ã›</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-xl font-bold mb-4" data-i18n="footer.social">SNS</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white text-2xl transition">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white text-2xl transition">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white text-2xl transition">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h4 class="text-xl font-bold mb-4" data-i18n="footer.support">ã‚µãƒãƒ¼ãƒˆ</h4>
                    <p class="text-gray-400 mb-2" data-i18n="footer.support_text">ã”è³ªå•ãƒ»ã”è¦æœ›ã¯ãŠæ°—è»½ã«</p>
                    <a href="mailto:support@chemical-quest.com" class="text-blue-400 hover:text-blue-300 transition">
                        support@chemical-quest.com
                    </a>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2024 ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆ. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        console.log('ğŸ§ª ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆ - åˆæœŸåŒ–é–‹å§‹');

        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹
        const gameState = {
            currentLevel: 1,
            score: 0,
            correctAnswers: 0,
            totalAttempts: 0,
            timeRemaining: 300,
            isGameActive: false,
            selectedElements: [],
            currentFormula: '',
            targetMolecule: { formula: 'Hâ‚‚O', name: 'æ°´' },
            elements: [
                { symbol: 'H', name: 'Hydrogen', nameJa: 'æ°´ç´ ', mass: 1, available: 10 },
                { symbol: 'O', name: 'Oxygen', nameJa: 'é…¸ç´ ', mass: 16, available: 5 },
                { symbol: 'C', name: 'Carbon', nameJa: 'ç‚­ç´ ', mass: 12, available: 6 },
                { symbol: 'N', name: 'Nitrogen', nameJa: 'çª’ç´ ', mass: 14, available: 4 },
                { symbol: 'Na', name: 'Sodium', nameJa: 'ãƒŠãƒˆãƒªã‚¦ãƒ ', mass: 23, available: 3 },
                { symbol: 'Cl', name: 'Chlorine', nameJa: 'å¡©ç´ ', mass: 35, available: 3 },
                { symbol: 'Ca', name: 'Calcium', nameJa: 'ã‚«ãƒ«ã‚·ã‚¦ãƒ ', mass: 40, available: 2 },
                { symbol: 'Fe', name: 'Iron', nameJa: 'é‰„', mass: 56, available: 2 }
            ],
            gameHistory: [],
            settings: {
                language: 'ja',
                fontSize: 'base',
                theme: 'light'
            }
        };

        // å¤šè¨€èªå¯¾å¿œ
        const translations = {
            ja: {
                'app.title': 'ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆ',
                'nav.game': 'ã‚²ãƒ¼ãƒ ',
                'nav.learn': 'å­¦ç¿’',
                'nav.about': 'ä½¿ã„æ–¹',
                'nav.privacy': 'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼',
                'nav.contact': 'ãŠå•ã„åˆã‚ã›',
                'hero.title': 'å…ƒç´ è¨˜å·ã§åŒ–å­¦å¼ã‚’ä½œã‚ã†ï¼',
                'hero.subtitle': 'Hâ‚‚Oã‹ã‚‰è¤‡é›‘ãªåŒ–åˆç‰©ã¾ã§ã€ãƒ‘ã‚ºãƒ«ã§åŒ–å­¦ãƒã‚¹ã‚¿ãƒ¼',
                'hero.start': 'ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ',
                'hero.learn': 'å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰',
                'game.title': 'åŒ–å­¦å¼ãƒ‘ã‚ºãƒ«',
                'game.description': 'å…ƒç´ ã‚’çµ„ã¿åˆã‚ã›ã¦æ­£ã—ã„åŒ–å­¦å¼ã‚’ä½œã‚Šã¾ã—ã‚‡ã†',
                'game.target': 'ç›®æ¨™åŒ–åˆç‰©:',
                'game.formula': 'ä½œæˆä¸­ã®åŒ–å­¦å¼:',
                'game.drop_elements': 'å…ƒç´ ã‚’ã“ã“ã«ãƒ‰ãƒ©ãƒƒã‚°',
                'game.check': 'åŒ–å­¦å¼ã‚’ãƒã‚§ãƒƒã‚¯',
                'game.clear': 'ã‚¯ãƒªã‚¢',
                'game.hint': 'ãƒ’ãƒ³ãƒˆ',
                'game.elements': 'åˆ©ç”¨å¯èƒ½ãªå…ƒç´ ',
                'common.coming_soon': 'Coming Soon'
            },
            en: {
                'app.title': 'Chemical Quest',
                'nav.game': 'Game',
                'nav.learn': 'Learn',
                'nav.about': 'About',
                'nav.privacy': 'Privacy',
                'nav.contact': 'Contact',
                'hero.title': 'Create Chemical Formulas!',
                'hero.subtitle': 'From Hâ‚‚O to complex compounds, master chemistry with puzzles',
                'hero.start': 'Start Game',
                'hero.learn': 'Learning Mode',
                'game.title': 'Chemical Formula Puzzle',
                'game.description': 'Combine elements to create correct chemical formulas',
                'game.target': 'Target Compound:',
                'game.formula': 'Your Formula:',
                'game.drop_elements': 'Drag elements here',
                'game.check': 'Check Formula',
                'game.clear': 'Clear',
                'game.hint': 'Hint',
                'game.elements': 'Available Elements',
                'common.coming_soon': 'Coming Soon'
            }
        };

        // åˆæœŸåŒ–
        function initializeApp() {
            console.log('ğŸ“± ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–');
            
            // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰è¨­å®šã‚’èª­ã¿è¾¼ã¿
            loadSettings();
            
            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®š
            setupEventListeners();
            
            // UIåˆæœŸåŒ–
            initializeUI();
            
            // å…ƒç´ ãƒ‘ãƒ¬ãƒƒãƒˆä½œæˆ
            createElementPalette();
            
            // PWAç™»éŒ²
            registerServiceWorker();
            
            console.log('âœ… åˆæœŸåŒ–å®Œäº†');
        }

        // è¨­å®šèª­ã¿è¾¼ã¿
        function loadSettings() {
            console.log('âš™ï¸ è¨­å®šèª­ã¿è¾¼ã¿');
            
            const saved = localStorage.getItem('chemicalQuest_settings');
            if (saved) {
                gameState.settings = { ...gameState.settings, ...JSON.parse(saved) };
            }
            
            // è¨€èªè¨­å®šé©ç”¨
            document.getElementById('languageSelect').value = gameState.settings.language;
            
            // ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºè¨­å®šé©ç”¨
            document.getElementById('fontSizeSelect').value = gameState.settings.fontSize;
            document.body.className = `font-size-${gameState.settings.fontSize}`;
            
            // ãƒ†ãƒ¼ãƒè¨­å®šé©ç”¨
            if (gameState.settings.theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            // å±¥æ­´èª­ã¿è¾¼ã¿
            const history = localStorage.getItem('chemicalQuest_history');
            if (history) {
                gameState.gameHistory = JSON.parse(history);
                updateStats();
            }
        }

        // è¨­å®šä¿å­˜
        function saveSettings() {
            localStorage.setItem('chemicalQuest_settings', JSON.stringify(gameState.settings));
            console.log('ğŸ’¾ è¨­å®šä¿å­˜å®Œäº†');
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
        function setupEventListeners() {
            console.log('ğŸ¯ ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š');
            
            // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒˆã‚°ãƒ«
            document.getElementById('menuToggle').addEventListener('click', toggleMobileMenu);
            
            // ã‚²ãƒ¼ãƒ é–‹å§‹ãƒœã‚¿ãƒ³
            document.getElementById('startGameBtn').addEventListener('click', startGame);
            document.getElementById('learnModeBtn').addEventListener('click', startLearnMode);
            
            // ã‚²ãƒ¼ãƒ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
            document.getElementById('checkFormulaBtn').addEventListener('click', checkFormula);
            document.getElementById('clearFormulaBtn').addEventListener('click', clearFormula);
            document.getElementById('hintBtn').addEventListener('click', showHint);
            
            // è¨­å®šå¤‰æ›´
            document.getElementById('languageSelect').addEventListener('change', changeLanguage);
            document.getElementById('fontSizeSelect').addEventListener('change', changeFontSize);
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            
            // SNSã‚·ã‚§ã‚¢
            document.getElementById('shareTwitter').addEventListener('click', shareToTwitter);
            document.getElementById('shareFacebook').addEventListener('click', shareToFacebook);
            document.getElementById('shareLine').addEventListener('click', shareToLine);
            document.getElementById('copyLink').addEventListener('click', copyLink);
            
            // ãƒ¢ãƒã‚¤ãƒ«ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®å¤–å´ã‚¯ãƒªãƒƒã‚¯
            document.addEventListener('click', (e) => {
                const sidebar = document.getElementById('mobileSidebar');
                const menuToggle = document.getElementById('menuToggle');
                if (!sidebar.contains(e.target) && !menuToggle.contains(e.target)) {
                    sidebar.classList.remove('open');
                }
            });
        }

        // UIåˆæœŸåŒ–
        function initializeUI() {
            console.log('ğŸ¨ UIåˆæœŸåŒ–');
            updateLanguage();
            updateTimer();
            updateScore();
        }

        // å¤šè¨€èªæ›´æ–°
        function updateLanguage() {
            const lang = gameState.settings.language;
            const elements = document.querySelectorAll('[data-i18n]');
            
            elements.forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[lang] && translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });
        }

        // å…ƒç´ ãƒ‘ãƒ¬ãƒƒãƒˆä½œæˆ
        function createElementPalette() {
            console.log('ğŸ”¬ å…ƒç´ ãƒ‘ãƒ¬ãƒƒãƒˆä½œæˆ');
            
            const palette = document.getElementById('elementPalette');
            palette.innerHTML = '';
            
            gameState.elements.forEach((element, index) => {
                const card = document.createElement('div');
                card.className = 'element-card p-4 text-center cursor-pointer';
                card.draggable = true;
                card.innerHTML = `
                    <div class="text-2xl font-bold mb-1">${element.symbol}</div>
                    <div class="text-xs opacity-80">${gameState.settings.language === 'ja' ? element.nameJa : element.name}</div>
                    <div class="text-xs mt-1">æ®‹ã‚Š: ${element.available}</div>
                `;
                
                // ãƒ‰ãƒ©ãƒƒã‚°ã‚¤ãƒ™ãƒ³ãƒˆ
                card.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', JSON.stringify(element));
                    console.log(`ğŸ”„ ãƒ‰ãƒ©ãƒƒã‚°é–‹å§‹: ${element.symbol}`);
                });
                
                // ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
                card.addEventListener('click', () => {
                    selectElement(element, card);
                });
                
                palette.appendChild(card);
            });
        }

        // å…ƒç´ é¸æŠ
        function selectElement(element, cardElement) {
            if (element.available <= 0) {
                console.warn(`âš ï¸ ${element.symbol}ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“`);
                return;
            }
            
            console.log(`âœ… å…ƒç´ é¸æŠ: ${element.symbol}`);
            
            // åˆ©ç”¨å¯èƒ½æ•°ã‚’æ¸›ã‚‰ã™
            element.available--;
            
            // é¸æŠæ¸ˆã¿å…ƒç´ ã«è¿½åŠ 
            gameState.selectedElements.push({ ...element });
            
            // UIã‚’æ›´æ–°
            updateFormulaBuilder();
            createElementPalette();
        }

        // åŒ–å­¦å¼ãƒ“ãƒ«ãƒ€ãƒ¼æ›´æ–°
        function updateFormulaBuilder() {
            const builder = document.getElementById('formulaBuilder');
            
            if (gameState.selectedElements.length === 0) {
                builder.innerHTML = '<span class="text-gray-400" data-i18n="game.drop_elements">å…ƒç´ ã‚’ã“ã“ã«ãƒ‰ãƒ©ãƒƒã‚°</span>';
                builder.classList.remove('valid', 'invalid');
                return;
            }
            
            // åŒ–å­¦å¼ã‚’æ§‹ç¯‰
            const formulaMap = {};
            gameState.selectedElements.forEach(element => {
                formulaMap[element.symbol] = (formulaMap[element.symbol] || 0) + 1;
            });
            
            let formula = '';
            Object.entries(formulaMap).forEach(([symbol, count]) => {
                formula += symbol;
                if (count > 1) {
                    formula += count.toString().split('').map(d => 
                        String.fromCharCode(0x2080 + parseInt(d))
                    ).join('');
                }
            });
            
            gameState.currentFormula = formula;
            builder.innerHTML = `<span class="text-2xl font-mono">${formula}</span>`;
            
            console.log(`ğŸ§ª ç¾åœ¨ã®åŒ–å­¦å¼: ${formula}`);
        }

        // åŒ–å­¦å¼ãƒã‚§ãƒƒã‚¯
        function checkFormula() {
            console.log(`ğŸ” åŒ–å­¦å¼ãƒã‚§ãƒƒã‚¯: ${gameState.currentFormula}`);
            
            if (!gameState.currentFormula) {
                alert(gameState.settings.language === 'ja' ? 
                    'åŒ–å­¦å¼ã‚’ä½œæˆã—ã¦ãã ã•ã„' : 'Please create a formula first');
                return;
            }
            
            const builder = document.getElementById('formulaBuilder');
            gameState.totalAttempts++;
            
            if (gameState.currentFormula === gameState.targetMolecule.formula) {
                console.log('ğŸ‰ æ­£è§£ï¼');
                builder.classList.add('valid');
                builder.classList.remove('invalid');
                
                gameState.correctAnswers++;
                gameState.score += 100;
                
                // æˆåŠŸéŸ³ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
                showSuccessMessage();
                nextLevel();
                
            } else {
                console.log('âŒ ä¸æ­£è§£');
                builder.classList.add('invalid');
                builder.classList.remove('valid');
                
                showFailureMessage();
            }
            
            updateStats();
            saveGameHistory();
        }

        // åŒ–å­¦å¼ã‚¯ãƒªã‚¢
        function clearFormula() {
            console.log('ğŸ—‘ï¸ åŒ–å­¦å¼ã‚¯ãƒªã‚¢');
            
            // é¸æŠæ¸ˆã¿å…ƒç´ ã‚’å…ƒã«æˆ»ã™
            gameState.selectedElements.forEach(element => {
                const original = gameState.elements.find(e => e.symbol === element.symbol);
                if (original) {
                    original.available++;
                }
            });
            
            gameState.selectedElements = [];
            gameState.currentFormula = '';
            
            updateFormulaBuilder();
            createElementPalette();
        }

        // ãƒ’ãƒ³ãƒˆè¡¨ç¤º
        function showHint() {
            console.log('ğŸ’¡ ãƒ’ãƒ³ãƒˆè¡¨ç¤º');
            
            const hints = {
                'Hâ‚‚O': ['æ°´ã¯æ°´ç´ 2ã¤ã¨é…¸ç´ 1ã¤ã§æ§‹æˆã•ã‚Œã¦ã„ã¾ã™', 'Hã‚’2ã¤ã€Oã‚’1ã¤ä½¿ã£ã¦ãã ã•ã„'],
                'NaCl': ['å¡©åŒ–ãƒŠãƒˆãƒªã‚¦ãƒ ï¼ˆé£Ÿå¡©ï¼‰ã§ã™', 'ãƒŠãƒˆãƒªã‚¦ãƒ ã¨å¡©ç´ ã‚’1ã¤ãšã¤'],
                'COâ‚‚': ['äºŒé…¸åŒ–ç‚­ç´ ã§ã™', 'ç‚­ç´ 1ã¤ã¨é…¸ç´ 2ã¤ã‚’çµ„ã¿åˆã‚ã›ã¦ãã ã•ã„']
            };
            
            const hint = hints[gameState.targetMolecule.formula];
            if (hint) {
                const message = gameState.settings.language === 'ja' ? hint[0] : hint[1];
                alert(message);
            } else {
                alert('ãƒ’ãƒ³ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“');
            }
        }

        // ã‚²ãƒ¼ãƒ é–‹å§‹
        function startGame() {
            console.log('ğŸ® ã‚²ãƒ¼ãƒ é–‹å§‹');
            
            gameState.isGameActive = true;
            gameState.timeRemaining = 300; // 5åˆ†
            gameState.score = 0;
            gameState.currentLevel = 1;
            
            // æœ€åˆã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåˆ†å­ã‚’è¨­å®š
            setRandomTarget();
            
            // ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹
            startTimer();
            
            updateScore();
            
            // ã‚²ãƒ¼ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            document.getElementById('game').scrollIntoView({ behavior: 'smooth' });
        }

        // å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰é–‹å§‹
        function startLearnMode() {
            console.log('ğŸ“š å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰é–‹å§‹');
            document.getElementById('learn').scrollIntoView({ behavior: 'smooth' });
        }

        // ãƒ©ãƒ³ãƒ€ãƒ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¨­å®š
        function setRandomTarget() {
            const targets = [
                { formula: 'Hâ‚‚O', name: 'æ°´', nameEn: 'Water' },
                { formula: 'NaCl', name: 'å¡©åŒ–ãƒŠãƒˆãƒªã‚¦ãƒ ', nameEn: 'Sodium Chloride' },
                { formula: 'COâ‚‚', name: 'äºŒé…¸åŒ–ç‚­ç´ ', nameEn: 'Carbon Dioxide' },
                { formula: 'NHâ‚ƒ', name: 'ã‚¢ãƒ³ãƒ¢ãƒ‹ã‚¢', nameEn: 'Ammonia' },
                { formula: 'CaClâ‚‚', name: 'å¡©åŒ–ã‚«ãƒ«ã‚·ã‚¦ãƒ ', nameEn: 'Calcium Chloride' }
            ];
            
            gameState.targetMolecule = targets[Math.floor(Math.random() * targets.length)];
            
            const targetDiv = document.getElementById('targetMolecule');
            targetDiv.innerHTML = `
                <span class="text-2xl font-mono">${gameState.targetMolecule.formula}</span>
                <p class="text-sm mt-2 opacity-80">
                    ${gameState.settings.language === 'ja' ? gameState.targetMolecule.name : gameState.targetMolecule.nameEn}
                </p>
            `;
            
            console.log(`ğŸ¯ æ–°ã—ã„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ: ${gameState.targetMolecule.formula}`);
        }

        // æ¬¡ã®ãƒ¬ãƒ™ãƒ«
        function nextLevel() {
            setTimeout(() => {
                gameState.currentLevel++;
                clearFormula();
                setRandomTarget();
                document.getElementById('currentLevel').textContent = gameState.currentLevel;
                
                console.log(`ğŸ“ˆ ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—: ${gameState.currentLevel}`);
            }, 2000);
        }

        // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        function showSuccessMessage() {
            const message = gameState.settings.language === 'ja' ? 
                'æ­£è§£ã§ã™ï¼ç´ æ™´ã‚‰ã—ã„ï¼' : 'Correct! Great job!';
            
            // ä¸€æ™‚çš„ãªæˆåŠŸè¡¨ç¤ºï¼ˆå°†æ¥ã¯ãƒ¢ãƒ¼ãƒ€ãƒ«ã§ï¼‰
            const builder = document.getElementById('formulaBuilder');
            const original = builder.innerHTML;
            builder.innerHTML = `<div class="text-green-600 font-bold text-xl">${message}</div>`;
            
            setTimeout(() => {
                builder.innerHTML = original;
            }, 2000);
        }

        // å¤±æ•—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        function showFailureMessage() {
            const message = gameState.settings.language === 'ja' ? 
                'æƒœã—ã„ï¼ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ï¼' : 'Close! Try again!';
            
            const builder = document.getElementById('formulaBuilder');
            const original = builder.innerHTML;
            builder.innerHTML = `<div class="text-red-600 font-bold text-xl">${message}</div>`;
            
            setTimeout(() => {
                builder.innerHTML = original;
            }, 2000);
        }

        // ã‚¿ã‚¤ãƒãƒ¼é–‹å§‹
        function startTimer() {
            const timer = setInterval(() => {
                if (!gameState.isGameActive || gameState.timeRemaining <= 0) {
                    clearInterval(timer);
                    if (gameState.timeRemaining <= 0) {
                        endGame();
                    }
                    return;
                }
                
                gameState.timeRemaining--;
                updateTimer();
            }, 1000);
        }

        // ã‚¿ã‚¤ãƒãƒ¼æ›´æ–°
        function updateTimer() {
            const minutes = Math.floor(gameState.timeRemaining / 60);
            const seconds = gameState.timeRemaining % 60;
            const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timer').textContent = display;
        }

        // ã‚¹ã‚³ã‚¢æ›´æ–°
        function updateScore() {
            document.getElementById('currentScore').textContent = gameState.score;
            document.getElementById('currentLevel').textContent = gameState.currentLevel;
        }

        // çµ±è¨ˆæ›´æ–°
        function updateStats() {
            const accuracy = gameState.totalAttempts > 0 ? 
                Math.round((gameState.correctAnswers / gameState.totalAttempts) * 100) : 0;
            
            document.getElementById('correctCount').textContent = gameState.correctAnswers;
            document.getElementById('accuracyRate').textContent = `${accuracy}%`;
        }

        // ã‚²ãƒ¼ãƒ å±¥æ­´ä¿å­˜
        function saveGameHistory() {
            const record = {
                timestamp: new Date().toISOString(),
                score: gameState.score,
                level: gameState.currentLevel,
                accuracy: gameState.totalAttempts > 0 ? 
                    Math.round((gameState.correctAnswers / gameState.totalAttempts) * 100) : 0
            };
            
            gameState.gameHistory.push(record);
            localStorage.setItem('chemicalQuest_history', JSON.stringify(gameState.gameHistory));
            console.log('ğŸ“Š ã‚²ãƒ¼ãƒ å±¥æ­´ä¿å­˜');
        }

        // ã‚²ãƒ¼ãƒ çµ‚äº†
        function endGame() {
            console.log('ğŸ ã‚²ãƒ¼ãƒ çµ‚äº†');
            gameState.isGameActive = false;
            
            const message = gameState.settings.language === 'ja' ? 
                `ã‚²ãƒ¼ãƒ çµ‚äº†ï¼\nã‚¹ã‚³ã‚¢: ${gameState.score}\nãƒ¬ãƒ™ãƒ«: ${gameState.currentLevel}\næ­£è§£ç‡: ${Math.round((gameState.correctAnswers / gameState.totalAttempts) * 100)}%` :
                `Game Over!\nScore: ${gameState.score}\nLevel: ${gameState.currentLevel}\nAccuracy: ${Math.round((gameState.correctAnswers / gameState.totalAttempts) * 100)}%`;
            
            alert(message);
            saveGameHistory();
        }

        // ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒˆã‚°ãƒ«
        function toggleMobileMenu() {
            const sidebar = document.getElementById('mobileSidebar');
            sidebar.classList.toggle('open');
            console.log('ğŸ“± ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒˆã‚°ãƒ«');
        }

        // è¨€èªå¤‰æ›´
        function changeLanguage() {
            const newLang = document.getElementById('languageSelect').value;
            gameState.settings.language = newLang;
            updateLanguage();
            saveSettings();
            console.log(`ğŸŒ è¨€èªå¤‰æ›´: ${newLang}`);
        }

        // ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºå¤‰æ›´
        function changeFontSize() {
            const newSize = document.getElementById('fontSizeSelect').value;
            gameState.settings.fontSize = newSize;
            document.body.className = `font-size-${newSize}`;
            saveSettings();
            console.log(`ğŸ“ ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºå¤‰æ›´: ${newSize}`);
        }

        // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
        function toggleTheme() {
            const currentTheme = gameState.settings.theme;
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            gameState.settings.theme = newTheme;
            
            if (newTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                document.documentElement.removeAttribute('data-theme');
                document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i>';
            }
            
            saveSettings();
            console.log(`ğŸ¨ ãƒ†ãƒ¼ãƒå¤‰æ›´: ${newTheme}`);
        }

        // SNSã‚·ã‚§ã‚¢æ©Ÿèƒ½
        function shareToTwitter() {
            const text = encodeURIComponent(`ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆã§ã‚¹ã‚³ã‚¢ ${gameState.score}ç‚¹ã‚’é”æˆï¼ğŸ§ª #ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆ #åŒ–å­¦ãƒ‘ã‚ºãƒ«`);
            const url = encodeURIComponent(window.location.href);
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
            console.log('ğŸ“± Twitterã‚·ã‚§ã‚¢');
        }

        function shareToFacebook() {
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
            console.log('ğŸ“± Facebookã‚·ã‚§ã‚¢');
        }

        function shareToLine() {
            const text = encodeURIComponent(`ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆã§ã‚¹ã‚³ã‚¢ ${gameState.score}ç‚¹ã‚’é”æˆï¼`);
            const url = encodeURIComponent(window.location.href);
            window.open(`https://line.me/R/msg/text/?${text}%0D%0A${url}`, '_blank');
            console.log('ğŸ“± LINEã‚·ã‚§ã‚¢');
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                alert(gameState.settings.language === 'ja' ? 
                    'ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼' : 'Link copied!');
                console.log('ğŸ”— ãƒªãƒ³ã‚¯ã‚³ãƒ”ãƒ¼å®Œäº†');
            });
        }

        // Service Workerç™»éŒ²
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js')
                    .then(() => console.log('ğŸ”§ Service Workerç™»éŒ²å®Œäº†'))
                    .catch(err => console.log('âŒ Service Workerç™»éŒ²å¤±æ•—:', err));
            }
        }

        // ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—è¨­å®š
        function setupDragAndDrop() {
            const builder = document.getElementById('formulaBuilder');
            
            builder.addEventListener('dragover', (e) => {
                e.preventDefault();
                builder.classList.add('bg-blue-100');
            });
            
            builder.addEventListener('dragleave', () => {
                builder.classList.remove('bg-blue-100');
            });
            
            builder.addEventListener('drop', (e) => {
                e.preventDefault();
                builder.classList.remove('bg-blue-100');
                
                try {
                    const elementData = JSON.parse(e.dataTransfer.getData('text/plain'));
                    selectElement(elementData, null);
                } catch (error) {
                    console.error('âŒ ãƒ‰ãƒ©ãƒƒã‚°ãƒ‡ãƒ¼ã‚¿è§£æã‚¨ãƒ©ãƒ¼:', error);
                }
            });
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã«åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸš€ ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†');
            initializeApp();
            setupDragAndDrop();
        });

        // ãƒšãƒ¼ã‚¸é›¢è„±å‰ã«çŠ¶æ…‹ã‚’ä¿å­˜
        window.addEventListener('beforeunload', () => {
            saveSettings();
            saveGameHistory();
        });

        console.log('âœ… ã‚±ãƒŸã‚«ãƒ«ã‚¯ã‚¨ã‚¹ãƒˆ - ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿å®Œäº†');
    </script>
</body>
</html>
